import{C as F}from"./chunk-BW4QA6B6-m5arwiOX.js";import{K as C}from"./chunk-6HTZNHPT-CQK7Nsir.js";import{R as d}from"./chunk-WVA4O7QS-ClTyIHdU.js";import{u as E}from"./chunk-D6UW7URG-Dnreh06z.js";import{ag as L,b as y,af as I,j as e,H as M,a as N,D as P,aj as S,J as s,K as h,G as T,B as b,ax as A,az as x,aJ as K,aK as R}from"./index-CU6eNUFN.js";var m=K([x(),R()]).transform(r=>r===""?null:Number(r)).optional().nullable(),z=A({weight:m,length:m,width:m,height:m,mid_code:x().optional(),hs_code:x().optional(),origin_country:x().optional()}),B=({product:r})=>{const{t:l}=y(),{handleSuccess:u}=E(),{getFormConfigs:j,getFormFields:g}=N(),f=j("product","attributes"),p=g("product","attributes"),i=P({defaultValues:{height:r.height?r.height:null,width:r.width?r.width:null,length:r.length?r.length:null,weight:r.weight?r.weight:null,mid_code:r.mid_code||"",hs_code:r.hs_code||"",origin_country:r.origin_country||""},schema:z,configs:f,data:r}),{mutateAsync:v,isPending:w}=S(r.id),_=i.handleSubmit(async n=>{await v({weight:n.weight?n.weight:null,length:n.length?n.length:null,width:n.width?n.width:null,height:n.height?n.height:null,mid_code:n.mid_code,hs_code:n.hs_code,origin_country:n.origin_country},{onSuccess:()=>{u()}})});return e.jsx(d.Form,{form:i,children:e.jsxs(C,{onSubmit:_,className:"flex h-full flex-col",children:[e.jsx(d.Body,{children:e.jsx("div",{className:"flex h-full flex-col gap-y-8",children:e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:i.control,name:"width",render:({field:{onChange:n,value:o,...a}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.width")}),e.jsx(s.Control,{children:e.jsx(h,{type:"number",min:0,step:"any",value:o||"",onChange:c=>{const t=c.target.value;n(t===""?null:parseFloat(t))},...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"height",render:({field:{onChange:n,value:o,...a}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.height")}),e.jsx(s.Control,{children:e.jsx(h,{type:"number",min:0,step:"any",value:o||"",onChange:c=>{const t=c.target.value;n(t===""?null:Number(t))},...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"length",render:({field:{onChange:n,value:o,...a}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.length")}),e.jsx(s.Control,{children:e.jsx(h,{type:"number",min:0,step:"any",value:o||"",onChange:c=>{const t=c.target.value;n(t===""?null:Number(t))},...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"weight",render:({field:{onChange:n,value:o,...a}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.weight")}),e.jsx(s.Control,{children:e.jsx(h,{type:"number",min:0,step:"any",value:o||"",onChange:c=>{const t=c.target.value;n(t===""?null:Number(t))},...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"mid_code",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.midCode")}),e.jsx(s.Control,{children:e.jsx(h,{...n})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"hs_code",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.hsCode")}),e.jsx(s.Control,{children:e.jsx(h,{...n})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"origin_country",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.countryOfOrigin")}),e.jsx(s.Control,{children:e.jsx(F,{...n})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(T,{fields:p,form:i})]})})}),e.jsx(d.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(d.Close,{asChild:!0,children:e.jsx(b,{size:"small",variant:"secondary",children:l("actions.cancel")})}),e.jsx(b,{size:"small",type:"submit",isLoading:w,children:l("actions.save")})]})})]})})},U=()=>{const{id:r}=L(),{t:l}=y(),{product:u,isLoading:j,isError:g,error:f}=I(r,{fields:"-type,-collection,-options,-tags,-images,-variants,-sales_channels"});if(g)throw f;return e.jsxs(d,{children:[e.jsx(d.Header,{children:e.jsx(d.Title,{asChild:!0,children:e.jsx(M,{children:l("products.editAttributes")})})}),!j&&u&&e.jsx(B,{product:u})]})};export{U as Component};
