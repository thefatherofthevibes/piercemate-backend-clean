import{T as c,a as z}from"./chunk-MSDRGCRR-CofsaNWy.js";import{u as P}from"./chunk-SR45O6K3-CgkuE2yC.js";import{g as N,a as E,b as S}from"./chunk-54IEHX46-DWMq7yL7.js";import{S as p}from"./chunk-ADOCJB6L-Dv-zw8lO.js";import{a as w,j as e,b as g,aL as H,C as q,H as A,a3 as m,B as h,L as f,r as v,k as D,a0 as j,_ as I,aS as R,g as b,d as k,A as L,P as M,T as B}from"./index-CU6eNUFN.js";import{u as G,_ as $}from"./chunk-DTZXEQXZ-BaBmpiQu.js";import"./chunk-ZQJPHZKI-B-mOVF44.js";import{S as F}from"./chunk-GIZFNLKK-R9MsJhoe.js";import{u as O}from"./chunk-C76H5USB-B0JL6HGS.js";import{G as Q}from"./globe-europe-DUfAVGK5.js";import"./chunk-P3UUX2T6-BbomILEi.js";import"./chunk-HQKGZADC-f8IAzGhQ.js";import"./chunk-EMIHDNB7-OmhvQEok.js";import"./chunk-DFFLVEZ5-D6yYebw6.js";import"./index-DA61-62J.js";import"./Trans-TuWeNclR.js";var d=b(),W=()=>{const{t:a}=g();return v.useMemo(()=>[d.accessor("name",{header:()=>e.jsx(c,{text:a("fields.name")}),cell:({getValue:s,row:t})=>{const r=t.getToggleExpandedHandler();if(t.original.parent_category!==void 0){const n=N(t.original);return e.jsx("div",{className:"flex size-full items-center gap-1 overflow-hidden",children:n.map((i,l)=>e.jsxs("div",{className:j("overflow-hidden",{"text-ui-fg-muted flex items-center gap-x-1":l!==n.length-1}),children:[e.jsx(m,{size:"small",leading:"compact",className:"truncate",children:i.name}),l!==n.length-1&&e.jsx(m,{size:"small",leading:"compact",children:"/"})]},i.id))})}return e.jsxs("div",{className:"flex size-full items-center gap-x-3 overflow-hidden",children:[e.jsx("div",{className:"flex size-7 items-center justify-center",children:t.getCanExpand()?e.jsx(I,{type:"button",onClick:n=>{n.stopPropagation(),n.preventDefault(),r()},size:"small",variant:"transparent",className:"text-ui-fg-subtle",children:e.jsx(R,{className:j({"rotate-90 transition-transform will-change-transform":t.getIsExpanded()})})}):null}),e.jsx("span",{className:"truncate",children:s()})]})}}),d.accessor("handle",{header:()=>e.jsx(c,{text:a("fields.handle")}),cell:({getValue:s})=>e.jsx(z,{text:`/${s()}`})}),d.accessor("is_active",{header:()=>e.jsx(c,{text:a("fields.status")}),cell:({getValue:s})=>{const{color:t,label:r}=E(s(),a);return e.jsx(p,{color:t,children:r})}}),d.accessor("is_internal",{header:()=>e.jsx(c,{text:a("categories.fields.visibility.label")}),cell:({getValue:s})=>{const{color:t,label:r}=S(s(),a);return e.jsx(p,{color:t,children:r})}})],[a])},Z=({pageSize:a=20,prefix:s})=>{const t=O(["q","offset","order"],s),r={q:t.q,limit:a,offset:t.offset?Number(t.offset):0,order:t.order};return{raw:t,searchParams:r}},u=20,J=()=>{const{t:a}=g(),{raw:s,searchParams:t}=Z({pageSize:u}),r=s.q?{include_ancestors_tree:!0,fields:"id,name,handle,is_active,is_internal,parent_category",...t}:{include_descendants_tree:!0,parent_category_id:"null",fields:"id,name,category_children,handle,is_internal,is_active",...t},{product_categories:n,count:i,isLoading:l,isError:y,error:_}=H({...r},{placeholderData:D}),x=V(),{table:C}=G({data:n||[],columns:x,count:i,getRowId:o=>o.id,getSubRows:o=>o.category_children,enableExpandableRows:!0,pageSize:u}),T=!!n&&n.length>0;if(y)throw _;return e.jsxs(q,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:a("categories.domain")}),e.jsx(m,{className:"text-ui-fg-subtle",size:"small",children:a("categories.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[T&&e.jsx(h,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(f,{to:"organize",children:a("categories.organize.action")})}),e.jsx(h,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(f,{to:"create",children:a("actions.create")})})]})]}),e.jsx($,{table:C,columns:x,count:i,pageSize:u,isLoading:l,navigateTo:o=>o.id,queryObject:s,search:!0,pagination:!0})]})},K=({category:a})=>{const{t:s}=g(),t=k("translation"),r=P(a);return e.jsx(L,{groups:[{actions:[{label:s("actions.edit"),icon:e.jsx(M,{}),to:`${a.id}/edit`}]},...t?[{actions:[{icon:e.jsx(Q,{}),label:s("translations.actions.manage"),to:`/settings/translations/edit?reference=product_category&reference_id=${a.id}`}]}]:[],{actions:[{label:s("actions.delete"),icon:e.jsx(B,{}),onClick:r}]}]})},U=b(),V=()=>{const a=W();return v.useMemo(()=>[...a,U.display({id:"actions",cell:({row:s})=>e.jsx(K,{category:s.original})})],[a])},xe=()=>{const{getWidgets:a}=w();return e.jsx(F,{widgets:{after:a("product_category.list.after"),before:a("product_category.list.before")},hasOutlet:!0,children:e.jsx(J,{})})};export{xe as Component};
