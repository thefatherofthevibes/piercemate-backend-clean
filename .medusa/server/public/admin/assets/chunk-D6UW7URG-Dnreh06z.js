import{cZ as p,u as m,r as i,j as n,b as E,c_ as R,J as w,c$ as f,c as x,a0 as F}from"./index-CU6eNUFN.js";var g=i.createContext(null),k=()=>{const t=i.useContext(g);if(!t)throw new Error("useRouteModal must be used within a RouteModalProvider");return t},C=t=>{const c=x();return i.useMemo(()=>{var r;const e=(r=c.state)==null?void 0:r.restore_params;return e?`${t}?${e.toString()}`:c.search?`${t}${c.search}`:t},[c.state,c.search,t])},D=({form:t,blockSearchParams:c=!1,children:o,onClose:e})=>{const{t:r}=E(),{formState:{isDirty:d}}=t,a=R(({currentLocation:s,nextLocation:h})=>{const{isSubmitSuccessful:M}=h.state||{},{isSubmitSuccessful:b}=s.state||{},S=M||b;if(S)return e==null||e(!0),!1;const v=s.pathname!==h.pathname,y=s.search!==h.search;if(c){const P=d&&(v||y);return v&&(e==null||e(S)),P}const O=d&&v;return v&&(e==null||e(S)),O}),l=()=>{var s;(s=a==null?void 0:a.reset)==null||s.call(a)},u=()=>{var s;(s=a==null?void 0:a.proceed)==null||s.call(a),e==null||e(!1)};return n.jsxs(w,{...t,children:[o,n.jsx(f,{open:a.state==="blocked",variant:"confirmation",children:n.jsxs(f.Content,{children:[n.jsxs(f.Header,{children:[n.jsx(f.Title,{children:r("general.unsavedChangesTitle")}),n.jsx(f.Description,{children:r("general.unsavedChangesDescription")})]}),n.jsxs(f.Footer,{children:[n.jsx(f.Cancel,{onClick:l,type:"button",children:r("actions.cancel")}),n.jsx(f.Action,{onClick:u,type:"button",children:r("actions.continue")})]})]})})]})},T=({prev:t,children:c})=>{const o=m(),e=x(),[r,d]=i.useState(!0),a=i.useCallback(u=>{const s=u||t;typeof s=="number"?(o(e.pathname+e.search,{replace:!0,state:{...e.state,isSubmitSuccessful:!0}}),setTimeout(()=>{o(s)},0)):o(s,{replace:!0,state:{isSubmitSuccessful:!0}})},[o,t,e]),l=i.useMemo(()=>({handleSuccess:a,setCloseOnEscape:d,__internal:{closeOnEscape:r}}),[a,d,r]);return n.jsx(g.Provider,{value:l,children:c})},j=i.createContext(null),_=({children:t,onOpenChange:c})=>{const[o,e]=i.useState({}),r=u=>o[u]||!1,d=(u,s)=>{e(h=>({...h,[u]:s})),c(s)},a=u=>{e(s=>({...s,[u]:!1}))},l=u=>{e(s=>{const h={...s};return delete h[u],h})};return n.jsx(j.Provider,{value:{getIsOpen:r,setIsOpen:d,register:a,unregister:l},children:t})},z=()=>{const t=i.useContext(j);if(!t)throw new Error("useStackedModal must be used within a StackedModalProvider");return t},B=({prev:t="..",children:c})=>{const o=m(),[e,r]=i.useState(!1),[d,a]=i.useState(!1),l=typeof t=="number"?t:C(t);i.useEffect(()=>(r(!0),()=>{r(!1),a(!1)}),[]);const u=s=>{if(!s){document.body.style.pointerEvents="auto",typeof l=="number"?o(l):o(l,{replace:!0});return}r(s)};return n.jsx(p,{open:e,onOpenChange:u,children:n.jsx(T,{prev:l,children:n.jsx(_,{onOpenChange:a,children:n.jsx($,{stackedModalOpen:d,children:c})})})})},$=({stackedModalOpen:t,children:c})=>{const{__internal:o}=k(),e=!o.closeOnEscape;return n.jsx(p.Content,{onEscapeKeyDown:e?r=>{r.preventDefault()}:void 0,className:F({"!bg-ui-bg-disabled !inset-x-5 !inset-y-3":t}),children:c})},I=p.Header,H=p.Title,A=p.Description,N=p.Footer,J=p.Body,K=p.Close,Z=D,G=Object.assign(B,{Header:I,Title:H,Body:J,Description:A,Footer:N,Close:K,Form:Z});export{G as R,_ as S,z as a,D as b,C as c,T as d,k as u};
