import{D as L}from"./chunk-C7F7MMXS-BXIPDtJe.js";import{C as I}from"./chunk-BW4QA6B6-m5arwiOX.js";import{K as M}from"./chunk-6HTZNHPT-CQK7Nsir.js";import{R as t}from"./chunk-WVA4O7QS-ClTyIHdU.js";import{u as S}from"./chunk-D6UW7URG-Dnreh06z.js";import{b as E,ag as A,de as B,j as e,H as N,aC as O,aD as w,dX as D,t as F,J as s,K as a,B as C,ax as R,az as i}from"./index-CU6eNUFN.js";var T=R({first_name:i().optional(),last_name:i().optional(),address_1:i().min(1),address_2:i().optional(),country_code:i().min(2).max(2),city:i().optional(),postal_code:i().optional(),province:i().optional(),company:i().optional(),phone:i().optional()});function H({order:o}){var x,j,h,u,p,f,g,_,b,y;const{t:l}=E(),{handleSuccess:d}=S(),n=O({defaultValues:{first_name:((x=o.billing_address)==null?void 0:x.first_name)||"",last_name:((j=o.billing_address)==null?void 0:j.last_name)||"",address_1:((h=o.billing_address)==null?void 0:h.address_1)||"",address_2:((u=o.billing_address)==null?void 0:u.address_2)||"",city:((p=o.billing_address)==null?void 0:p.city)||"",company:((f=o.billing_address)==null?void 0:f.company)||"",country_code:((g=o.billing_address)==null?void 0:g.country_code)||"",phone:((_=o.billing_address)==null?void 0:_.phone)||"",postal_code:((b=o.billing_address)==null?void 0:b.postal_code)||"",province:((y=o.billing_address)==null?void 0:y.province)||""},resolver:w(T)}),{mutateAsync:c,isPending:m}=D(o.id),v=n.handleSubmit(async r=>{try{await c({billing_address:r}),F.success(l("orders.edit.billingAddress.requestSuccess")),d()}catch(z){F.error(z.message)}});return e.jsx(t.Form,{form:n,children:e.jsxs(M,{onSubmit:v,className:"flex size-full flex-col overflow-hidden",children:[e.jsx(t.Body,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(s.Field,{control:n.control,name:"address_1",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.address")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"address_2",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.address2")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"postal_code",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.postalCode")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"city",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.city")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"country_code",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.country")}),e.jsx(s.Control,{children:e.jsx(I,{...r,disabled:!0})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"province",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.state")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"first_name",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.firstName")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"last_name",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.lastName")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"company",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.company")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"phone",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.phone")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(t.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(t.Close,{asChild:!0,children:e.jsx(C,{variant:"secondary",size:"small",children:l("actions.cancel")})}),e.jsx(C,{isLoading:m,type:"submit",variant:"primary",size:"small",disabled:!!Object.keys(n.formState.errors||{}).length,children:l("actions.save")})]})})]})})}var V=()=>{const{t:o}=E(),l=A(),{order:d,isPending:n,isError:c,error:m}=B(l.id,{fields:L});if(!n&&c)throw m;return e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsx(N,{children:o("orders.edit.billingAddress.title")})}),d&&e.jsx(H,{order:d})]})};export{V as Component};
