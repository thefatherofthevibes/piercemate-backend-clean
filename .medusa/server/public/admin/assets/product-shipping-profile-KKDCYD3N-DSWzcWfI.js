import{u as j}from"./chunk-3TZOFKX2-CT89dJ05.js";import{C as _}from"./chunk-OFN7DIZA-AqDsxLMm.js";import{K as P}from"./chunk-6HTZNHPT-CQK7Nsir.js";import{R as r}from"./chunk-WVA4O7QS-ClTyIHdU.js";import{u as y}from"./chunk-D6UW7URG-Dnreh06z.js";import{ag as b,b as f,af as C,j as e,H as S,aC as v,aD as F,aj as E,t as h,r as V,J as n,B as u,ax as w,az as N,s as R}from"./index-CU6eNUFN.js";var T=w({shipping_profile_id:N()}),z=({product:l})=>{var d;const{t:o}=f(),{handleSuccess:p}=y(),a=j({queryKey:["shipping_profiles"],queryFn:s=>R.admin.shippingProfile.list(s),getOptions:s=>s.shipping_profiles.map(t=>({label:t.name,value:t.id}))}),i=v({defaultValues:{shipping_profile_id:((d=l.shipping_profile)==null?void 0:d.id)??""},resolver:F(T)}),c=i.watch("shipping_profile_id"),{mutateAsync:m,isPending:g}=E(l.id),x=i.handleSubmit(async s=>{await m({shipping_profile_id:s.shipping_profile_id===""?null:s.shipping_profile_id},{onSuccess:({product:t})=>{h.success(o("products.shippingProfile.edit.toasts.success",{title:t.title})),p()},onError:t=>{h.error(t.message)}})});return V.useEffect(()=>{typeof c>"u"&&i.setValue("shipping_profile_id","")},[c]),e.jsx(r.Form,{form:i,children:e.jsxs(P,{onSubmit:x,className:"flex h-full flex-col",children:[e.jsx(r.Body,{children:e.jsx("div",{className:"flex h-full flex-col gap-y-4",children:e.jsx(n.Field,{control:i.control,name:"shipping_profile_id",render:({field:s})=>e.jsxs(n.Item,{children:[e.jsx(n.Label,{children:o("products.fields.shipping_profile.label")}),e.jsx(n.Control,{children:e.jsx(_,{...s,allowClear:!0,options:a.options,searchValue:a.searchValue,onSearchValueChange:a.onSearchValueChange,fetchNextPage:a.fetchNextPage})}),e.jsx(n.ErrorMessage,{})]})})})}),e.jsx(r.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(r.Close,{asChild:!0,children:e.jsx(u,{size:"small",variant:"secondary",children:o("actions.cancel")})}),e.jsx(u,{size:"small",type:"submit",isLoading:g,children:o("actions.save")})]})})]})})},M=()=>{const{id:l}=b(),{t:o}=f(),{product:p,isLoading:a,isError:i,error:c}=C(l,{fields:"*shipping_profile,-type,-collection,-options,-tags,-images,-variants,-sales_channels"});if(i)throw c;return e.jsxs(r,{children:[e.jsx(r.Header,{children:e.jsx(r.Title,{asChild:!0,children:e.jsx(S,{children:o("products.shippingProfile.edit.header")})})}),!a&&p&&e.jsx(z,{product:p})]})};export{M as Component};
