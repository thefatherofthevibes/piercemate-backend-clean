import{u as ue,a as pe,b as me}from"./chunk-NEZX6265-Bzomlx5t.js";import{u as ge,a as xe}from"./chunk-XNIVMZHA-D7Y7TfLc.js";import{r as j,e as he,d as fe,v as je,a as ve,j as e,ek as ye,q as Z,b as _,f2 as _e,w as Se,dm as Ce,C as H,H as Y,a3 as p,A as w,P as be,an as L,L as M,y as we,f5 as O,h as N,am as te,al as h,f6 as Pe,f7 as ke,f8 as Te,a2 as R,k as re,t as f,g as ae,T as ne}from"./index-CU6eNUFN.js";import{S as Ee}from"./chunk-ADOCJB6L-Dv-zw8lO.js";import{u as oe,_ as ce}from"./chunk-DTZXEQXZ-BaBmpiQu.js";import"./chunk-ZQJPHZKI-B-mOVF44.js";import{S as Ie}from"./chunk-GIZFNLKK-R9MsJhoe.js";import{X as Le}from"./x-circle-COKnXHGh.js";import"./chunk-MSDRGCRR-CofsaNWy.js";import"./chunk-P3UUX2T6-BbomILEi.js";import"./chunk-C76H5USB-B0JL6HGS.js";import"./chunk-HQKGZADC-f8IAzGhQ.js";import"./chunk-EMIHDNB7-OmhvQEok.js";import"./chunk-DFFLVEZ5-D6yYebw6.js";import"./index-DA61-62J.js";import"./Trans-TuWeNclR.js";var Re=Object.defineProperty,z=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ee=(s,r,t)=>r in s?Re(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,ze=(s,r)=>{for(var t in r||(r={}))ie.call(r,t)&&ee(s,t,r[t]);if(z)for(var t of z(r))le.call(r,t)&&ee(s,t,r[t]);return s},Oe=(s,r)=>{var t={};for(var a in s)ie.call(s,a)&&r.indexOf(a)<0&&(t[a]=s[a]);if(s!=null&&z)for(var a of z(s))r.indexOf(a)<0&&le.call(s,a)&&(t[a]=s[a]);return t};const de=j.forwardRef((s,r)=>{var t=s,{color:a="currentColor"}=t,n=Oe(t,["color"]);return j.createElement("svg",ze({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:r},n),j.createElement("path",{stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.5 13.945a6.444 6.444 0 1 0 0-12.89 6.444 6.444 0 0 0 0 12.89"}),j.createElement("path",{stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m4.611 7.722 2 2.223 3.778-4.89"}))});de.displayName="CheckCircle";var Ne=()=>({queryKey:Te.details(),queryFn:async()=>ke()}),ns=async()=>{const s=Ne();return Z.getQueryData(s.queryKey)??await Z.fetchQuery(s)},Ae=({store:s})=>{var o,m,u;const{t:r}=_(),{region:t}=_e(s.default_region_id,void 0,{enabled:!!s.default_region_id}),a=(o=s.supported_currencies)==null?void 0:o.find(y=>y.is_default),{sales_channel:n}=Se(s.default_sales_channel_id,{enabled:!!s.default_sales_channel_id}),{stock_location:i}=Ce(s.default_location_id,{fields:"id,name"},{enabled:!!s.default_location_id});return e.jsxs(H,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(Y,{children:r("store.domain")}),e.jsx(p,{className:"text-ui-fg-subtle",size:"small",children:r("store.manageYourStoresDetails")})]}),e.jsx(w,{groups:[{actions:[{icon:e.jsx(be,{}),label:r("actions.edit"),to:"edit"}]}]})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(p,{size:"small",leading:"compact",weight:"plus",children:r("fields.name")}),e.jsx(p,{size:"small",leading:"compact",children:s.name})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(p,{size:"small",leading:"compact",weight:"plus",children:r("store.defaultCurrency")}),a?e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(L,{size:"2xsmall",children:(m=a.currency_code)==null?void 0:m.toUpperCase()}),e.jsx(p,{size:"small",leading:"compact",children:(u=a.currency)==null?void 0:u.name})]}):e.jsx(p,{size:"small",leading:"compact",children:"-"})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(p,{size:"small",leading:"compact",weight:"plus",children:r("store.defaultRegion")}),e.jsx("div",{className:"flex items-center gap-x-2",children:t?e.jsx(L,{size:"2xsmall",asChild:!0,children:e.jsx(M,{to:`/settings/regions/${t.id}`,children:t.name})}):e.jsx(p,{size:"small",leading:"compact",children:"-"})})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(p,{size:"small",leading:"compact",weight:"plus",children:r("store.defaultSalesChannel")}),e.jsx("div",{className:"flex items-center gap-x-2",children:n?e.jsx(L,{size:"2xsmall",asChild:!0,children:e.jsx(M,{to:`/settings/sales-channels/${n.id}`,children:n.name})}):e.jsx(p,{size:"small",leading:"compact",children:"-"})})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 px-6 py-4",children:[e.jsx(p,{size:"small",leading:"compact",weight:"plus",children:r("store.defaultLocation")}),e.jsx("div",{className:"flex items-center gap-x-2",children:i?e.jsx(L,{size:"2xsmall",asChild:!0,children:e.jsx(M,{to:`/settings/locations/${i.id}`,children:i.name})}):e.jsx(p,{size:"small",leading:"compact",children:"-"})})]})]})},W=10,De=({store:s})=>{var b,C,G,K,V,$,J,U;const[r,t]=j.useState({}),{searchParams:a,raw:n}=ue({pageSize:W}),{currencies:i,count:o,isPending:m,isError:u,error:y}=pe({code:(b=s.supported_currencies)==null?void 0:b.map(l=>l.currency_code),...a},{placeholderData:re,enabled:!!((C=s.supported_currencies)!=null&&C.length)}),{price_preferences:g,isPending:S,isError:x,error:c}=we({attribute:"currency_code",value:(G=s.supported_currencies)==null?void 0:G.map(l=>l.currency_code)},{enabled:!!((K=s.supported_currencies)!=null&&K.length)}),P=Me(),k=j.useMemo(()=>new Map(g==null?void 0:g.map(l=>[l.value,l])),[g]),A=i==null?void 0:i.map(l=>{var D;return{...l,is_tax_inclusive:(D=k.get(l.code))==null?void 0:D.is_tax_inclusive}}),{table:T}=oe({data:A??[],columns:P,count:o,getRowId:l=>l.code,rowSelection:{state:r,updater:t},enablePagination:!0,enableRowSelection:!0,pageSize:W,meta:{storeId:s.id,supportedCurrencies:s.supported_currencies,defaultCurrencyCode:($=(V=s.supported_currencies)==null?void 0:V.find(l=>l.is_default))==null?void 0:$.currency_code,preferencesMap:k}}),{mutateAsync:E}=O(s.id),{t:d}=_(),I=N(),v=async()=>{var X;const l=Object.keys(r);await I({title:d("general.areYouSure"),description:d("store.removeCurrencyWarning",{count:l.length}),confirmText:d("actions.remove"),cancelText:d("actions.cancel")})&&await E({supported_currencies:((X=s.supported_currencies)==null?void 0:X.filter(q=>!l.includes(q.currency_code)))??[]},{onSuccess:()=>{t({}),f.success(d("store.toast.currenciesRemoved"))},onError:q=>{f.error(q.message)}})};if(u)throw y;if(x)throw c;const F=m||S;return e.jsxs(H,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(Y,{level:"h2",children:d("store.currencies")}),e.jsx(w,{groups:[{actions:[{icon:e.jsx(te,{}),label:d("actions.add"),to:"currencies"}]}]})]}),e.jsx(ce,{orderBy:[{key:"name",label:d("fields.name")},{key:"code",label:d("fields.code")}],search:!0,pagination:!0,table:T,pageSize:W,columns:P,count:(J=s.supported_currencies)!=null&&J.length?o:0,isLoading:(U=s.supported_currencies)!=null&&U.length?F:!1,queryObject:n}),e.jsx(h,{open:!!Object.keys(r).length,children:e.jsxs(h.Bar,{children:[e.jsx(h.Value,{children:d("general.countSelected",{count:Object.keys(r).length})}),e.jsx(h.Seperator,{}),e.jsx(h.Command,{action:v,shortcut:"r",label:d("actions.remove")})]})})]})},qe=({storeId:s,currency:r,supportedCurrencies:t,defaultCurrencyCode:a,preferencesMap:n})=>{var g,S;const{mutateAsync:i}=O(s),{t:o}=_(),m=N(),u=async()=>{await m({title:o("general.areYouSure"),description:o("store.removeCurrencyWarning",{count:1}),verificationInstruction:o("general.typeToConfirm"),verificationText:r.name,confirmText:o("actions.remove"),cancelText:o("actions.cancel")})&&await i({supported_currencies:t.filter(c=>c.currency_code!==r.code)},{onSuccess:()=>{f.success(o("store.toast.currenciesRemoved"))},onError:c=>{f.error(c.message)}})},y=async()=>{await i({supported_currencies:t.map(x=>{const c=n.get(x.currency_code);return{...x,is_tax_inclusive:x.currency_code===r.code?!(c!=null&&c.is_tax_inclusive):void 0}})},{onSuccess:()=>{f.success(o("store.toast.updatedTaxInclusivitySuccessfully"))},onError:x=>{f.error(x.message)}})};return e.jsx(w,{groups:[{actions:[{icon:(g=n.get(r.code))!=null&&g.is_tax_inclusive?e.jsx(Le,{}):e.jsx(de,{}),label:(S=n.get(r.code))!=null&&S.is_tax_inclusive?o("store.disableTaxInclusivePricing"):o("store.enableTaxInclusivePricing"),onClick:y}]},{actions:[{icon:e.jsx(ne,{}),label:o("actions.remove"),onClick:u,disabled:r.code===a}]}]})},B=ae(),Me=()=>{const s=me(),{t:r}=_();return j.useMemo(()=>[B.display({id:"select",header:({table:t})=>e.jsx(R,{checked:t.getIsSomePageRowsSelected()?"indeterminate":t.getIsAllPageRowsSelected(),onCheckedChange:a=>t.toggleAllPageRowsSelected(!!a)}),cell:({row:t})=>e.jsx(R,{checked:t.getIsSelected(),onCheckedChange:a=>t.toggleSelected(!!a),onClick:a=>{a.stopPropagation()}})}),...s,B.accessor("is_tax_inclusive",{header:r("fields.taxInclusivePricing"),cell:({getValue:t})=>{const a=t();return e.jsx(Ee,{color:a?"green":"grey",children:r(a?"fields.true":"fields.false")})}}),B.display({id:"actions",cell:({row:t,table:a})=>{const{supportedCurrencies:n,storeId:i,defaultCurrencyCode:o,preferencesMap:m}=a.options.meta;return e.jsx(qe,{storeId:i,currency:t.original,supportedCurrencies:n,defaultCurrencyCode:o,preferencesMap:m})}})],[s,r])},Q=10,We=({store:s})=>{var T,E,d,I;const[r,t]=j.useState({}),{searchParams:a,raw:n}=ge({pageSize:Q}),{locales:i,count:o,isPending:m,isError:u,error:y}=Pe({code:(T=s.supported_locales)==null?void 0:T.map(v=>v.locale_code),...a},{placeholderData:re,enabled:!!((E=s.supported_locales)!=null&&E.length)}),g=Qe(),{table:S}=oe({data:i??[],columns:g,count:o,getRowId:v=>v.code,rowSelection:{state:r,updater:t},enablePagination:!0,enableRowSelection:!0,pageSize:Q,meta:{storeId:s.id,supportedLocales:s.supported_locales}}),{mutateAsync:x}=O(s.id),{t:c}=_(),P=N(),k=async()=>{var b;const v=Object.keys(r);await P({title:c("general.areYouSure"),description:c("store.removeLocaleWarning",{count:v.length}),confirmText:c("actions.remove"),cancelText:c("actions.cancel")})&&await x({supported_locales:((b=s.supported_locales)==null?void 0:b.filter(C=>!v.includes(C.locale_code)))??[]},{onSuccess:()=>{t({}),f.success(c("store.toast.localesRemoved"))},onError:C=>{f.error(C.message)}})};if(u)throw y;const A=m;return e.jsxs(H,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(Y,{level:"h2",children:c("store.locales")}),e.jsx(w,{groups:[{actions:[{icon:e.jsx(te,{}),label:c("actions.add"),to:"locales"}]}]})]}),e.jsx(ce,{orderBy:[{key:"name",label:c("fields.name")},{key:"code",label:c("fields.code")}],search:!0,pagination:!0,table:S,pageSize:Q,columns:g,count:(d=s.supported_locales)!=null&&d.length?o:0,isLoading:(I=s.supported_locales)!=null&&I.length?A:!1,queryObject:n}),e.jsx(h,{open:!!Object.keys(r).length,children:e.jsxs(h.Bar,{children:[e.jsx(h.Value,{children:c("general.countSelected",{count:Object.keys(r).length})}),e.jsx(h.Seperator,{}),e.jsx(h.Command,{action:k,shortcut:"r",label:c("actions.remove")})]})})]})},Be=({storeId:s,locale:r,supportedLocales:t})=>{const{mutateAsync:a}=O(s),{t:n}=_(),i=N(),o=async()=>{await i({title:n("general.areYouSure"),description:n("store.removeLocaleWarning",{count:1}),verificationInstruction:n("general.typeToConfirm"),verificationText:r.name,confirmText:n("actions.remove"),cancelText:n("actions.cancel")})&&await a({supported_locales:t.filter(u=>u.locale_code!==r.code)},{onSuccess:()=>{f.success(n("store.toast.localesRemoved"))},onError:u=>{f.error(u.message)}})};return e.jsx(w,{groups:[{actions:[{icon:e.jsx(ne,{}),label:n("actions.remove"),onClick:o}]}]})},se=ae(),Qe=()=>{const s=xe(),{t:r}=_();return j.useMemo(()=>[se.display({id:"select",header:({table:t})=>e.jsx(R,{checked:t.getIsSomePageRowsSelected()?"indeterminate":t.getIsAllPageRowsSelected(),onCheckedChange:a=>t.toggleAllPageRowsSelected(!!a)}),cell:({row:t})=>e.jsx(R,{checked:t.getIsSelected(),onCheckedChange:a=>t.toggleSelected(!!a),onClick:a=>{a.stopPropagation()}})}),...s,se.display({id:"actions",cell:({row:t,table:a})=>{const{supportedLocales:n,storeId:i}=a.options.meta;return e.jsx(Be,{storeId:i,locale:t.original,supportedLocales:n})}})],[s,r])},os=()=>{const s=he(),r=fe("translation"),{store:t,isPending:a,isError:n,error:i}=je(void 0,{initialData:s}),{getWidgets:o}=ve();if(a||!t)return e.jsx(ye,{sections:2,showJSON:!0,showMetadata:!0});if(n)throw i;return e.jsxs(Ie,{widgets:{before:o("store.details.before"),after:o("store.details.after")},data:t,hasOutlet:!0,showMetadata:!0,showJSON:!0,children:[e.jsx(Ae,{store:t}),e.jsx(De,{store:t}),r&&e.jsx(We,{store:t})]})};export{os as Component,ns as loader};
