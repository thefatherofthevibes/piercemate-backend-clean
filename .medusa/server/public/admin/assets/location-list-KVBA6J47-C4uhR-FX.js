import{L as S}from"./chunk-I3VB6NM2-3flSW701.js";import{P as u}from"./chunk-P3UUX2T6-BbomILEi.js";import{S as h,a as v}from"./chunk-U726TGCM-B6ofFpH7.js";import{b as f,dL as _,a as T,j as s,C as y,u as P,h as C,r as w,ai as g,P as E,T as N,k as q,H as D,fj as K,aa as R,s as H,q as x,dJ as L,t as b}from"./index-CU6eNUFN.js";import{a as I}from"./chunk-B6ZOPCPA-DDRX9y7l.js";import{T as m}from"./chunk-GIZFNLKK-R9MsJhoe.js";import{D as M}from"./chunk-KCWP7RF5-BTLBwV1W.js";import{u as O}from"./chunk-C76H5USB-B0JL6HGS.js";import"./chunk-KIIT4BNH-C4Q4cLxR.js";import"./Trans-TuWeNclR.js";var z="name,*sales_channels,*address,*fulfillment_sets,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.shipping_profile",c=R(),F=()=>{const{t:e}=f(),l=P(),d=C(),r=async i=>{if(await d({title:e("general.areYouSure"),description:e("stockLocations.delete.confirmation",{name:i.name}),confirmText:e("actions.remove"),cancelText:e("actions.cancel")}))try{await H.admin.stockLocation.delete(i.id),x.invalidateQueries({queryKey:L.lists()}),x.invalidateQueries({queryKey:L.detail(i.id)}),b.success(e("stockLocations.delete.successToast",{name:i.name}))}catch(a){b.error(a.message)}};return w.useMemo(()=>[c.accessor("name",{header:e("fields.name"),cell:({getValue:i})=>{const t=i();return t?s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:t}):s.jsx(u,{})}}),c.accessor("address",{header:e("fields.address"),cell:({getValue:i,row:t})=>{const a=i(),o=t.original;return a?s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:I({address:o.address}).join(", ")})}):s.jsx(u,{})}}),c.accessor("fulfillment_sets",{id:"shipping_fulfillment",header:e("stockLocations.fulfillmentSets.shipping.header"),cell:({getValue:i})=>{const t=i(),o=!!(t==null?void 0:t.find(n=>n.type==="shipping"));return s.jsx(g,{color:o?"green":"grey",children:e(o?"statuses.enabled":"statuses.disabled")})}}),c.accessor("fulfillment_sets",{id:"pickup_fulfillment",header:e("stockLocations.fulfillmentSets.pickup.header"),cell:({getValue:i})=>{const t=i(),o=!!(t==null?void 0:t.find(n=>n.type==="pickup"));return s.jsx(g,{color:o?"green":"grey",children:e(o?"statuses.enabled":"statuses.disabled")})}}),c.accessor("sales_channels",{header:e("stockLocations.salesChannels.label"),cell:({getValue:i})=>{const t=i();return t!=null&&t.length?s.jsx("div",{className:"flex items-center",children:s.jsx(S,{inline:!0,n:1,list:t.map(a=>a.name)})}):s.jsx(u,{})}}),c.action({actions:i=>{const t=i.row.original;return[[{icon:s.jsx(E,{}),label:e("actions.edit"),onClick:()=>{l(`/settings/locations/${t.id}/edit`)}}],[{icon:s.jsx(N,{}),label:e("actions.delete"),onClick:()=>r(t)}]]}})],[])},Q=({pageSize:e=20,prefix:l})=>{const d=O(["order","offset","q"],l),{offset:r,...i}=d;return{limit:e,offset:r?Number(r):0,...i}},k=20,j="loc";function ee(){const{t:e}=f(),l=Q({pageSize:k,prefix:j}),{stock_locations:d=[],count:r,isError:i,error:t,isLoading:a}=_({fields:z,...l},{placeholderData:q}),o=F(),{getWidgets:n}=T();if(i)throw t;return s.jsxs(m,{widgets:{after:n("location.list.after"),before:n("location.list.before"),sideAfter:n("location.list.side.after"),sideBefore:n("location.list.side.before")},showJSON:!0,children:[s.jsx(m.Main,{children:s.jsx(y,{className:"flex flex-col divide-y p-0",children:s.jsx(M,{data:d,columns:o,rowCount:r,pageSize:k,getRowId:p=>p.id,heading:e("stockLocations.domain"),subHeading:e("stockLocations.list.description"),emptyState:{empty:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageEmpty")},filtered:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageFiltered")}},actions:[{label:e("actions.create"),to:"create"}],isLoading:a,rowHref:p=>`/settings/locations/${p.id}`,enableSearch:!0,prefix:j,layout:"fill"})})}),s.jsx(m.Sidebar,{children:s.jsx(A,{})})]})}var A=()=>{const{t:e}=f();return s.jsxs(y,{className:"p-0",children:[s.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:s.jsx(D,{level:"h2",children:e("stockLocations.sidebar.header")})}),s.jsx(h,{to:"/settings/locations/shipping-profiles",labelKey:e("stockLocations.sidebar.shippingProfiles.label"),descriptionKey:e("stockLocations.sidebar.shippingProfiles.description"),icon:s.jsx(v,{})}),s.jsx(h,{to:"/settings/locations/shipping-option-types",labelKey:e("stockLocations.sidebar.shippingOptionTypes.label"),descriptionKey:e("stockLocations.sidebar.shippingOptionTypes.description"),icon:s.jsx(K,{})})]})};export{ee as Component};
